def project_url = "https://github.com/micheal-itoken/itoken-config.git"
def github_auth = "3d9e50972be9316389dfdad81a705ee028ab9b02"
node {
    def mvnHome
    stage('拉取代码') { // for display purposes
        checkout([$class: 'GitSCM', branches: [[name: '*/${branch}']],
            doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [],
            userRemoteConfigs: [[credentialsId: "${github_auth}", url: "${project_url}"]]])
    }
    stage('构建代码') {
        def basepath=$(cd `dirname $0`; pwd)
        echo  $basepath
        sh "mvn -f itoken-config clean install"
        sh "mvn -f ${project_name} clean package"
    }
    stage('Results') {
        echo 'deploy code'
    }
}